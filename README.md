# dalek-manager
A web config tool to be hosted on the roborio with several team code infrastructure diagnostics

## File Structure
json will be used for most things

### Binary Directory
The robot code binary is located at `/home/lvuser/`.
 - `FRCUserProgram` - Robot Code binary run at startup by the roborio
 - `dalek/` - Working directory for the application

### Working Directory
The working directory is `/home/lvuser/dalek/`. Within it is the manifest file and several subdirectories
- `manifest.json` - This is a file containing file paths to various files.
- `autonomous/` - This directory contains all autonomous scripts
- `ports/` - This directory contains all port configs
- `controls/` - This directory contains all controller bind profiles
- `settings/` - This directory contains all user-defined config files
- `logs/` - This directory contains all previous logs and a ledger of all logs
- `binaries/` - This directory contains all versions of the robot code binary and a ledger/table of info on each one

### Manifest
The manifest file contains the following attributes
 - `autonomous` - Path to the lua script for autonomous mode
 - `ports` - Path to the json file containing component port labels
 - `controls` - Path to the json file containing the controller binds profile
 - `settings` - Path to the json file containing end-user-defined settings for the robot configuration
 - `logs` - Path to the json file containing log configuration
 - `binary` - Path to the binary being run

### Subdirectories
Most of the subdirectories are simply just a collection of various versions of the file associated.
Most also have a `template.json` which is generated by the robot code client which contains a template of the values and defaults requested by the robot code at initialization. This is used by the web app to assist in initializing values in a new or outdated config.

#### Logs
The `logs/` directory contains several more directories indexed by run time. Each will contain a copy of the `manifest.json` used for that runtime at startup. Each log directory will also contain a `console.log` containing the formatted log output.

`timestamp: <message_type-verbosity> [system][component_name][component_type]: message`
 - `timestamp` - Time in milliseconds since program start
 - `message_type` - Either `status`, `info`, `warn`, `error`, or `fatal`
 - `verbosity` - Integer. The higher the number the more verbose. Used for filtering by importance
 - `system` - System generating the message. e.g. "Drive", "Lifter", etc.
 - `component_name` - Name of component within system. e.g. "Right Front Motor", "Piston", etc.
 - `component_type` - Type of component e.g. "Talon", "Solenoid", etc.

#### Binaries
The `binaries/` directory contains all versions of the robot code binary, as well as `ledger.json` which contains info about each. Attributes will be things such as git-commit, date built, user-notes. 
